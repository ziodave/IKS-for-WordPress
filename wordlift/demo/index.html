<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
    <link rel="stylesheet" href="css/ui-lightness/jquery-ui-1.8.12.custom.css" />
    <link rel="stylesheet" href="css/entity_selector.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    <link rel="stylesheet" href="css/semantic_enhancer.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    <link rel="stylesheet" href="css/seo.demo.css" type="text/css" media="screen" title="no title" charset="utf-8" />
    
	<script type="text/javascript" src="js/jquery-1.5.2.js"></script>
	<script type="text/javascript" src="js/jquery-ui-1.8.12.custom.min.js"></script>
	<script type="text/javascript" src="js/jquery.rdfquery.rules.js"></script>
	<script type="text/javascript" src="js/underscore.js"></script>
	<script type="text/javascript" src="js/backbone.js"></script>
	
	<script src="js/io/io.enhancement_context.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/io/io.rdf_vocabulary_content.js" type="text/javascript" charset="utf-8"></script>
	
	<script type="text/javascript"><!--
	    var FISE_URL = 'http://wit.istc.cnr.it:9090/engines/';
	

	
		$('document').ready( function() {
            
            $('#lift').click( function() {
                
                $('#semantic_content').html( $('#content') );
                $('#dialog').dialog('open');
    
                /*
                 * RDF triple
                 *  \- Enhancement
                 *      \- start
                 *      \- end
                 *      \- context
                 *  \- Type
                 *      \- Instance(Type)
                 */
                 
                /* RDF Type "Person" (http://www.google.com/support/webmasters/bin/answer.py?answer=146646)
                 *  \- name (fn)
                 *  \- nickname
                 *  \- photo
                 *  \- title
                 *  \- role
                 *  \- url
                 *  \- affiliation (org)
                 *  \- friend
                 *  \- contact
                 *  \- acquaintance
                 *  \- address (adr)
                 *      \- street-address
                 *      \- locality
                 *      \- region
                 *      \- postal-code
                 *      \- country-name
                 */
                
                
                $.ajax({
                	async: true,
                	success: function(data) {
                	        console.log("the following data has been received:\n%s", data);
                	        
                	        // an array of semantic contents
                            var contents = $([]);
                	        
                	        var newRdf = $.rdf().load(data, {});
                	        for (subject in newRdf.databank.subjectIndex) {
                	            
                	            // if this triple is an IKS Enhancement Context, this var will hold its content
                	            var content = new RdfVocabularyContent( newRdf.databank.subjectIndex[subject], newRdf );

                	            if ( content.get("isEnhancement") )
                	            {
                	                console.log("Enhancement triple. Type [%s], properties [%d]",content.get("type"),content.get("properties").size());
                	                contents.push(content);
                                }
            	            }

            	            contents.each( function() {
            	                var start = this.get("enhancementContext").get("start");
            	                var end   = this.get("enhancementContext").get("end");
            	                var html = $('#semantic_content #content').html();
            	                var head = html.substring(0, start);
            	                var value = html.substring(start, end);
                				var newEntity  = '<span typeof="'+this.get("type")+'" property="'+this.getKeyProperty(value) +'" style="color:red;" id="0">' + value + '</span>';
                				var tail = html.substring(end, html.length);
                				
                				$('#semantic_content #content')
                				.empty()
                				.append(head+newEntity+tail);
                				
                				alert($('#semantic_content').html());
            	            });
							
                	    },
                	error: function () {
                	        alert('error');
                	    },
                	type: "POST",
                	url: '../utils/proxy/proxy.php',
                	data: {
                		proxy_url: FISE_URL, 
                		content: $('#semantic_content #content').html(),
                		verb: "POST",
                		format: "application/rdf+json"
            		}
                });
                
            });
            
    		$('#dialog').dialog({
    			height: 300,
    			width: 600,
    			modal: true,
    			autoOpen: false
    		});

		});
	// --></script>
</head>
<body>

<button id="lift" type="button">Lift!</button>

<div style="height: 200px; min-height: 109px; width: auto;" class="ui-dialog-content ui-widget-content" id="dialog">
    <img id="loader" src="images/ajax-loader.gif" style="display: none;"/>
    <div id="semantic_content"></div>
</div>

<div id="content">
    <div>Albert Einstein loves the songs by the person Bob Marley. He was married with Rita Anderson.</div>
</div>

<div id="additional_content">    
<p>Osama bin Laden, the al-Qaida leader who masterminded the September 11, 2001 attacks is dead, U.S. President Barack Obama said from Washington late Sunday, also confirming that the U.S. has his body in its possession.</p>
    
<p>&quot;Justice has been made,&quot; Obama said in a heartfelt address from the White House, as he remembered the close to 3,000 people killed in the September 11, 2001, attacks on New York and Washington, and those who died in a plane that crashed in Pennsylvania.</p>
 
<p>The United States first discovered a lead on bin Laden&#x27;s whereabouts in August 2010, and Obama recounted meeting with CIA head Leon Panetta, saying that the capture of the al-Qaida leader was to be a top priority.</p>

<p>Obama said that he and his national security team met tirelessly for months, until last week when there was enough intelligence to take action.</p>

<p>The U.S. president authorized the operation on the compound where bin Laden was hiding, and according to Obama&#x27;s statement, no civilians or Americans were harmed in the attack.</p>

<p>Obama said that the United States cooperated with Pakistan in bin Laden&#x27;s capture. He called this a historic day for both Pakistan and the United States, saying that the two countries must cooperate going forward.</p>

<p>A senior U.S. counterterrorism official said bin Laden was killed in a ground operation in Islamabad, Pakistan, not by a Predator drone. The official said it happened last week. A Senior Pakistani intelligence official has confirmed that bin Laden was in fact killed in Pakistan.</p>

<p>This is a major accomplishment for Obama and his national security team. Obama&#x27;s predecessor, George W. Bush, had repeatedly vowed to bring to justice the mastermind of the September 11, attacks, but never did before leaving office in early 2009.</p>

<p>Bush lauded the capture of the al-Qaida mastermind, calling it a &quot;momentous achievement&quot;.</p>

<p>U.S. officials said that after searching in vain for the al-Qaida leader since he disappeared in Afghanistan in late 2001, the Saudi-born extremist is now dead and his body has been recovered.</p>

<p>He had been the subject of a search since he eluded U.S. soldiers and Afghan militia forces in a large-scale assault on the Tora Bora mountains in 2001. The trail quickly went cold after he disappeared and many intelligence officials believed he had been hiding in Pakistan.</p>

<p>While in hiding, bin Laden had taunted the West and advocated his militant Islamist views in videotapes spirited from his hideaway.</p>

<p>Besides September 11, Washington has also linked bin Laden to a string of attacks -- including the 1998 bombings of American embassies in Kenya and Tanzania and the 2000 bombing of the warship USS Cole in Yemen.</p>

</div>

</body>
</html>